{"ast":null,"code":"import _regeneratorRuntime from\"/Users/alkinoos/sudoku/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/alkinoos/sudoku/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/alkinoos/sudoku/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/alkinoos/sudoku/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import\"./App.css\";import React,{useState,useRef}from\"react\";import Board from\"./ui/Board\";import Interface from\"./ui/Interface\";import{REST}from\"./services/api.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function getGrid(){var grid=[];for(var i=0;i<9;i++){grid[i]=Array(9).fill(0);}return grid;}function copy2DArray(from,to){for(var i=0;i<from.length;i++){to[i]=_toConsumableArray(from[i]);}}function Sudoku(){var _useState=useState(getGrid),_useState2=_slicedToArray(_useState,2),grid=_useState2[0],setGrid=_useState2[1];var _useState3=useState(\"** UNSOLVED **\"),_useState4=_slicedToArray(_useState3,2),puzzleStatus=_useState4[0],setPuzzleStatus=_useState4[1];var initialGrid=useRef(getGrid());function handleChange(row,col,e){var re=/^[0-9\\b]+$/;if(e.target.value===\"\"||re.test(e.target.value)){if(Number(e.target.value)<10&&initialGrid.current[row][col]===0){var newGrid=_toConsumableArray(grid);newGrid[row][col]=Number(e.target.value);setGrid(newGrid);}}}function handleInterface(_x){return _handleInterface.apply(this,arguments);}function _handleInterface(){_handleInterface=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(action){var newGrid,status,puzzStats;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.t0=action;_context.next=_context.t0===\"create\"?3:_context.t0===\"solve\"?10:_context.t0===\"clear\"?15:_context.t0===\"validate\"?20:26;break;case 3:_context.next=5;return handleCreate();case 5:newGrid=_context.sent;copy2DArray(newGrid,initialGrid.current);setPuzzleStatus(\"\");setGrid(newGrid);return _context.abrupt(\"break\",27);case 10:_context.next=12;return handleSolve();case 12:newGrid=_context.sent;setGrid(newGrid);return _context.abrupt(\"break\",27);case 15:newGrid=getGrid();copy2DArray(newGrid,initialGrid.current);setGrid(newGrid);setPuzzleStatus(\"\");return _context.abrupt(\"break\",27);case 20:_context.next=22;return handleValidate();case 22:status=_context.sent;puzzStats=status?\"** SOLVED **\":\"** UNSOLVED **\";setPuzzleStatus(puzzStats);return _context.abrupt(\"break\",27);case 26:throw new Error(\"Invalid action\");case 27:case\"end\":return _context.stop();}},_callee);}));return _handleInterface.apply(this,arguments);}function handleCreate(){return _handleCreate.apply(this,arguments);}function _handleCreate(){_handleCreate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return REST.getBoard();case 3:response=_context2.sent;_context2.next=6;return response.json();case 6:data=_context2.sent;return _context2.abrupt(\"return\",data.game);case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}},_callee2,null,[[0,10]]);}));return _handleCreate.apply(this,arguments);}function handleValidate(){return _handleValidate.apply(this,arguments);}function _handleValidate(){_handleValidate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var response,data;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return REST.validateBoard(grid);case 3:response=_context3.sent;_context3.next=6;return response.json();case 6:data=_context3.sent;return _context3.abrupt(\"return\",data.status);case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 13:case\"end\":return _context3.stop();}},_callee3,null,[[0,10]]);}));return _handleValidate.apply(this,arguments);}function handleSolve(){return _handleSolve.apply(this,arguments);}function _handleSolve(){_handleSolve=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var response,data;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return REST.solveBoard(grid);case 3:response=_context4.sent;_context4.next=6;return response.json();case 6:data=_context4.sent;if(!data.status){_context4.next=12;break;}setPuzzleStatus(\"** SOLVED **\");return _context4.abrupt(\"return\",data.solution);case 12:setPuzzleStatus(\"** UNSOLVABLE **\");return _context4.abrupt(\"return\",grid);case 14:_context4.next=19;break;case 16:_context4.prev=16;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 19:case\"end\":return _context4.stop();}},_callee4,null,[[0,16]]);}));return _handleSolve.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{className:\"Sudoku\",children:[/*#__PURE__*/_jsx(Board,{puzzle:initialGrid.current,grid:grid,handleChange:handleChange}),/*#__PURE__*/_jsx(Interface,{handleInterface:handleInterface,status:puzzleStatus})]});}export default Sudoku;","map":{"version":3,"names":["React","useState","useRef","Board","Interface","REST","jsx","_jsx","jsxs","_jsxs","getGrid","grid","i","Array","fill","copy2DArray","from","to","length","_toConsumableArray","Sudoku","_useState","_useState2","_slicedToArray","setGrid","_useState3","_useState4","puzzleStatus","setPuzzleStatus","initialGrid","handleChange","row","col","e","re","target","value","test","Number","current","newGrid","handleInterface","_x","_handleInterface","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","action","status","puzzStats","wrap","_callee$","_context","prev","next","t0","handleCreate","sent","abrupt","handleSolve","handleValidate","Error","stop","_handleCreate","_callee2","response","data","_callee2$","_context2","getBoard","json","game","console","log","_handleValidate","_callee3","_callee3$","_context3","validateBoard","_handleSolve","_callee4","_callee4$","_context4","solveBoard","solution","className","children","puzzle"],"sources":["/Users/alkinoos/sudoku/client/src/Sudoku.js"],"sourcesContent":["import \"./App.css\";\nimport React, { useState, useRef } from \"react\";\nimport Board from \"./ui/Board\";\nimport Interface from \"./ui/Interface\";\nimport { REST } from \"./services/api.js\";\n\nfunction getGrid() {\n  const grid = [];\n  for (let i = 0; i < 9; i++) {\n    grid[i] = Array(9).fill(0);\n  }\n  return grid;\n}\n\nfunction copy2DArray(from, to) {\n  for (let i = 0; i < from.length; i++) {\n    to[i] = [...from[i]];\n  }\n}\n\nfunction Sudoku() {\n  const [grid, setGrid] = useState(getGrid);\n  const [puzzleStatus, setPuzzleStatus] = useState(\"** UNSOLVED **\");\n  const initialGrid = useRef(getGrid());\n\n  function handleChange(row, col, e) {\n    const re = /^[0-9\\b]+$/;\n    if (e.target.value === \"\" || re.test(e.target.value)) {\n      if (Number(e.target.value) < 10 && initialGrid.current[row][col] === 0) {\n        const newGrid = [...grid];\n        newGrid[row][col] = Number(e.target.value);\n        setGrid(newGrid);\n      }\n    }\n  }\n\n  async function handleInterface(action) {\n    let newGrid;\n    switch (action) {\n      case \"create\":\n        newGrid = await handleCreate();\n        copy2DArray(newGrid, initialGrid.current);\n        setPuzzleStatus(\"\");\n        setGrid(newGrid);\n        break;\n      case \"solve\":\n        newGrid = await handleSolve();\n        setGrid(newGrid);\n        break;\n      case \"clear\":\n        newGrid = getGrid();\n        copy2DArray(newGrid, initialGrid.current);\n        setGrid(newGrid);\n        setPuzzleStatus(\"\");\n        break;\n      case \"validate\":\n        const status = await handleValidate();\n        const puzzStats = status ? \"** SOLVED **\" : \"** UNSOLVED **\";\n        setPuzzleStatus(puzzStats);\n        break;\n      default:\n        throw new Error(\"Invalid action\");\n    }\n  }\n\n  async function handleCreate() {\n    try {\n      const response = await REST.getBoard();\n      const data = await response.json();\n      return data.game;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function handleValidate() {\n    try {\n      const response = await REST.validateBoard(grid);\n      const data = await response.json();\n      return data.status;\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function handleSolve() {\n    try {\n      const response = await REST.solveBoard(grid);\n      const data = await response.json();\n      if (data.status) {\n        setPuzzleStatus(\"** SOLVED **\");\n        return data.solution;\n      } else {\n        setPuzzleStatus(\"** UNSOLVABLE **\");\n        return grid;\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  return (\n    <div className=\"Sudoku\">\n      <Board\n        puzzle={initialGrid.current}\n        grid={grid}\n        handleChange={handleChange}\n      />\n      <Interface handleInterface={handleInterface} status={puzzleStatus} />\n    </div>\n  );\n}\n\nexport default Sudoku;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}